{% extends 'base.html' %}

<!-- page title -->
{% block page_title %}<a href="{% url 'pkgs.views.index' %}" class="navbar-brand" >Packages</a>{% endblock %}

{% block navbar-default_extensions %}
	{% if confirm_move %}
<span style="margin-left:45px; margin-top:30px;">Confirm Move Packages</span>
	{% else %}
<p>Confirm Delete Packages</p>
	{% endif %}
{% endblock %}

{% block content %}

{% if items_to_move %}

	{% if confirm_move %}
	{# Drop-down list for moving to a catalog #}
<form id='done' action='/pkgs/done/' method='post'>
	<div class='well form-horizontal'>
		<input class='btn' type='submit' value='Confirm Move' />
	</div>
	{% else %}
	{# Drop-down list for deleting packages #}
<form id='done' action='/pkgs/deleted/' method='post'>
	<div class='well form-horizontal'>
		<input class='btn' type='submit' value='Confirm Delete' />
	</div>
	{% endif %}
	<p/>
	<table class='pkglist table table-striped table-condensed'>
		<thead>
			<tr>
				<th>Name</th>
				<th>Version</th>
				<th>Origin Catalog</th>
	{% if confirm_move %}
				<th>Destination Catalog</th>
	{% endif %}
			</tr>
		</thead>
		<tbody>
	{% for package, version, orig_catalog, pkg_location in items_to_move %}
		{% if confirm_move and orig_catalog != dest_catalog %}
			<tr>
				<td class='item-name'>
				<input type='hidden' name='final_items_to_move[]' value='{{ package }}___{{ version }}___{{ dest_catalog }}' />
				{{ package }}</td>
				<td class='version'>{{ version }}</td>
				<td class='orig_catalog'>{{ orig_catalog }}</td>
				<td class='dest_catalog'>{{ dest_catalog }}</td>
			</tr>
		{% else %}
			<tr>
				<td class='item-name'>
				<input type='hidden' name='final_items_to_delete[]' value='{{ package }}___{{ version }}___{{ pkg_location }}' />
				{{ package }}</td>
				<td class='version'>{{ version }}</td>
				<td class='version'>{{ pkg_location }}</td>
			</tr>
		{% endif %}

	{% endfor %}
		</tbody>
	</table>
</form>
{% else %}
	<p><i>No Packages selected.</i></p>
{% endif %}
{% endblock content %}